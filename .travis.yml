matrix:
  include:
  - os: linux
    language: python
    python: 2.7
    env:
    - TOXENV=py27
    - PYTHON=2.7
  - os: linux
    language: python
    python: 3.4
    env:
    - TOXENV=py34
    - PYTHON=3.4
  - os: linux
    language: python
    python: 3.5
    env:
    - TOXENV=py35
    - PYTHON=3.5
  - os: linux
    language: python
    python: 3.6
    env:
    - TOXENV=py36
    - PYTHON=3.6
  - os: linux
    language: python
    dist: xenial
    python: 3.7
    sudo: true
    env:
    - TOXENV=py37
    - PYTHON=3.7
  - os: osx
    languague: generic
    env:
    - PYTHON=2.7
    - TOXENV=py27
  - os: osx
    languague: generic
    env:
    - PYTHON=3.4.8
    - TOXENV=py34
  - os: osx
    languague: generic
    env:
    - PYTHON=3.5.5
    - TOXENV=py35
  - os: osx
    languague: generic
    env:
    - PYTHON=3.6.5
    - TOXENV=py36
  - os: osx
    languague: generic
    env:
    - PYTHON=3.7.1
    - TOXENV=py37
before_install:
- cd gopath/src/github.com/skycoin/skycoin && git checkout v0.25.0 && cd ${TRAVIS_BUILD_DIR}
- if [[ $TRAVIS_OS_NAME == 'linux' ]]; then bash ./.travis/install-linux.sh ; fi
- if [[ $TRAVIS_OS_NAME == 'osx' ]]; then bash ./.travis/install-osx.sh; fi
- if [[ $TRAVIS_OS_NAME == 'osx' ]]; then export PYCMD_VERSION="$(echo ${PYTHON} |
  cut -d . -f 1,2)" ; fi
- if [[ $TRAVIS_OS_NAME == 'osx' ]]; then export PYCMD_PATH="$(pyenv which python${PYCMD_VERSION})"
  ; fi
- if [[ $TRAVIS_OS_NAME == 'osx' ]]; then export PYCMD_DIRPATH="$( dirname ${PYCMD_PATH}
  )" ; fi
- if [[ $TRAVIS_OS_NAME == 'osx' ]]; then export PATH="${PYCMD_DIRPATH}:/Users/travis/.pyenv/shims:${PATH}"
  ; fi
- if [[ $TRAVIS_OS_NAME == 'osx' ]]; then eval "alias python${PYCMD_VERSION}=$(pyenv
  which python${PYCMD_VERSION})" && eval "alias python2.7=$(pyenv which python2.7)";
  fi
- if [[ $TRAVIS_OS_NAME == 'osx' ]]; then pyenv versions ; fi
- if [[ $TRAVIS_OS_NAME == 'osx' ]]; then pyenv which python${PYCMD_VERSION} ; fi
- if [[ $TRAVIS_OS_NAME == 'osx' ]]; then eval "python${PYCMD_VERSION} --version"
  ; fi
- echo "PATH=$PATH"
install:
- eval "$(gimme 1.10)"
after_failure:
- cat ./.tox/${TOXENV}/log/${TOXENV}-*.log
script: make test-ci
notifications:
  email: false
  webhooks: https://fathomless-fjord-24024.herokuapp.com/notify
deploy:
  provider: pypi
  user: olemis
  password:
    secure: ipXeAptmRJvVppWHaZ+Ij7xnp9nXk8dGOm3LADeUgr1bmK8FshQ5qi7iXZHyFd+ZiFGJN91M2vn71O924au1BJeBovhsqyDFAQQs7spVhncJWw5j5jGE7U7+8MaWIZ8juqS/GntTTHEfXw/fgYUsFzMzxQ682I9vfhtvgOT5F8PDNM5vgdZzLKztrN9XV3Y3kfgtLd5mK1LfD7KlL1f1GzPqUXpGd1jL8b7SlLTd2b8K4hfUEoy92U1LUtQPXb5GLUj7ZEQvDxIcVkkXVKDGKz2mJrWw6f2ePcOlSPXAKSZ3BEbses4J3vaqh11Q2cc9YsNB7Pzy751WsM0LmPOmTkeCToXSISKTA6M7w98MQxcjQkClWyKjxDkUn2P4vCkJllv7opFD23dSEGdooYov2MjN8f+EtDd0d9RLnbBYwF5kFsXJ/WVDFIRhzltAIUULCPf6y3ubN6FaF0OcwYpmOiUpOKhEGrbU9afC3NDIIC+ulb6vo9AEx0zBVa3z+2Qt2lxU6agzTiAq4riOonqcJd5Mqzk0tqHm5iUDqQNsY8XqJ6MKIzYQk7U8fGNvURV4drJGf2QNIz98vcWzvOm5sWRPxjy7vZbFaqmm8VXH1s7zp69v2u/OOdZqmxBdXrHhVOG7vi/RLwzoAN7bR88SqJa6r8tGUG83xgP0Pi6GWpw=
  distributions: "sdist bdist_wheel"
  skip_existing: true
  on:
    tags: true
    repo: skycoin/pyskycoin
